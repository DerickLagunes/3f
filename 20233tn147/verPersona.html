<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1 id="nombreVer"></h1>
    <h2 id="apellidoVer"></h2>
    <a href="mailto:correo" id="mai"></a> <br>
    <a href="tel:telefono" id="tele"></a><br>
    <h3 id="cumple"></h3>
    <p id="con"></p>
    <script>
        let h1 = document.getElementById("nombreVer");
        let h2 = document.getElementById("apellidoVer");
        let h3 = document.getElementById("cumple");
        let telef = document.getElementById("tele");
        let mail = document.getElementById("mai");
        let passsword = document.getElementById("con");

        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const nombre = urlParams.get('nombre');
        const apellido = urlParams.get('apellido');
        const correo = urlParams.get('correo');
        const fecha = urlParams.get('fn');
        const telefono = urlParams.get('tel');
        const usuario = urlParams.get('usuario');
        const contra1 = urlParams.get("pass")
        const contra2 = urlParams.get("rpas")
        
        h1.innerText = nombre;
        h2.innerText = apellido;
            
        h3.innerText = calcularEdad(fecha);
        telef.innerText = telefono;
        telef.setAttribute("href","tel:"+telefono);
        mail.innerText = correo;
        mail.setAttribute("href","mailto:"+correo);
        passsword.innerText = passwordSegura(contra1,contra2);


        function calcularEdad(fecha){
            let fechaActual = new Date();
            let opciones = { year: 'numeric', month: '2-digit', day: '2-digit' };
            let fechaFormateada = fechaActual.toLocaleDateString('sv-SE', opciones);
            console.log("Fecha actual: " + fechaFormateada);
            console.log("Fecha cumple: " + fecha);
            toString(fechaFormateada);
            //console.log(typeof(fechaFormateada))
            //console.log("Fecha en s: " + fechaFormateada);
            let fecha1 = new Date(fechaFormateada);
            let fecha2 = new Date(fecha);

            // Calcular la diferencia en milisegundos
            let diferenciaMilisegundos = fecha1 - fecha2;

            // Convertir la diferencia de milisegundos a años
            let diferenciaAnios = diferenciaMilisegundos / (1000 * 60 * 60 * 24 * 365.25);

            // Redondear la diferencia a la baja para obtener el número entero de años
            diferenciaAnios = Math.floor(diferenciaAnios);

            console.log("La diferencia en años es: " + diferenciaAnios);

            return diferenciaAnios;

        }

        function passwordSegura(c1,c2){
            if(c1!=c2){
                return "Las contraseñas no son la misma padrino, así no es.";
            }else{
                if(c1.length < 5){
                    return "La contraseña no es segura. debe tener 5 o más caracteres.";
                }else{
                    return c1;
                }
            }
        }
    </script>
</body>
</html>