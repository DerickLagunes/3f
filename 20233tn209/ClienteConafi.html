<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Datos del Cliente</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='CSS/bootstrap.css'>
</head>
<body>
    <div class="container">
        <div class="row">
            <div class="col">
                <h1>CONAFI</h1>
                <img src="IMG/imgV.jpg" width="500" height="500">
            </div>
            
            <div>
                <h1>Bienvenido a nuestra comunidad financiera</h1>
            <p>v3</p>
                <table>
                    <tr>
                    <td><h1 id="name"></h1></td>
                    <td><h2 id="last"></h2></td>
                </tr>
                <tr>
                    <td><p>Contacto</p></td>
                </tr>
                <tr>
                    <td><p>Correo Electrónico</p></td>
                    <td><p id="email"></p></td>
                </tr>
                <tr>
                    <td><p>Telefono</p></td>
                    <td><p id="statusTel"></p></td>
                </tr>
                <tr>
                    <td><p>Perfil</p></td>
                </tr>
                <tr>
                    <td><p>Edad</p></td>
                    <td><p id="date"></p></p></td>
                </tr>
                <tr>
                    <td><p>Usuario</p></td>
                    <td><p id="user"></p></td>
                </tr>

                <tr>
                    <td><p id="statusContra"></p></td>
                    <td><p id="erronea"></p>
                    </td>
                </tr>
                </table>
            </div>
        </div>
    </div>
<script>
    function getParameter(key) {
        let address = window.location.search; // Obtiene la URL de la barra de búsqueda del navegador
        let parameterList = new URLSearchParams(address); // Busca los parámetros
        return parameterList.get(key); // Regresa el valor del parámetro "key"
    }

    let name = getParameter("name");
    let last = getParameter("last");
    let email = getParameter("email");
    let date = new Date(getParameter("date"));
    let tel = getParameter("tel");
    let user = getParameter("user");
    let contra = getParameter("contra");
    let contra2 = getParameter("contra2");

    // Pintar nombre de usuario
    document.getElementById("name").innerText = name;
    document.getElementById("last").innerText = last;
    document.getElementById("email").innerHTML = `<a href="mailto:${email}">${email}</a>`;
    document.getElementById("date").innerText = "Edad: " + calculateAge(date) + " años"; // Usar la función calculateAge
    document.getElementById("statusTel").innerText = tel; // Mostrar el número de teléfono directamente
    document.getElementById("user").innerText = user;

    // Pintar estado de la contraseña
    if (tel.length < 10) {
        document.getElementById("statusTel").innerText = "Numero de telefono " + tel + " no válido";
    } else {
        document.getElementById("statusTel").innerText = "Numero " + tel + " Válido";
    }

    if (contra.length < 5) {
        document.getElementById("statusContra").innerText = "Tu contraseña es insegura";
    } else {
        document.getElementById("statusContra").innerText = "Tu contraseña es segura";
    }

    // Verificar si las contraseñas coinciden
    if (contra !== contra2) {
        document.getElementById("erronea").innerText = "Las contraseñas no coinciden";
    } else {
        document.getElementById("erronea").innerText = "Las contraseñas coinciden";
    }

    function calculateAge(birthDate) {
        let currentDate = new Date();
        let age = currentDate.getFullYear() - birthDate.getFullYear();
        let monthDifference = currentDate.getMonth() - birthDate.getMonth();
        if (monthDifference < 0 || (monthDifference === 0 && currentDate.getDate() < birthDate.getDate())) {
            age--;
        }
        return age;
    }
</script>

<button>
<a href="NuevoCliente.html">Volver</a>
</button>

</body>
</html>
